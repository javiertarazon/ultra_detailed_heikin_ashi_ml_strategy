# ü§ñ Bot Trader Copilot - Sistema de Trading Automatizado con ML

**Versi√≥n:** 4.7 | **Fecha:** 24 de octubre de 2025 | **Estado:** ‚úÖ DEPURADO, ORGANIZADO Y LISTO PARA LIVE TRADING

Un sistema modular de trading automatizado que combina estrategias t√©cnicas avanzadas con Machine Learning para generar se√±ales de trading de alta calidad en m√∫ltiples mercados. 

**‚úÖ SISTEMA COMPLETAMENTE DEPURADO v4.7:**
- Archivos fundamentales protegidos con checksums
- Scripts de test/debug organizados
- Documentaci√≥n de 92 archivos clasificada en 12 categor√≠as
- Sistema de validaci√≥n autom√°tica implementado
- 100% listo para operaci√≥n en vivo

------

## üìö DOCUMENTACI√ìN COMPLETA v4.7

### üéØ Inicio R√°pido
- **[GUIA_RAPIDA_v47.md](GUIA_RAPIDA_v47.md)** - Referencia r√°pida de operaci√≥n
- **[PROYECTO_COMPLETADO_v47.md](PROYECTO_COMPLETADO_v47.md)** - Resumen ejecutivo completo
- **[ESTRUCTURA_DEPURADA.md](ESTRUCTURA_DEPURADA.md)** - Arquitectura del proyecto

### üîí Seguridad y Protecci√≥n
- **[ARCHIVOS_PROTEGIDOS.md](ARCHIVOS_PROTEGIDOS.md)** - Lista de archivos core protegidos
- **Validar:** `python validate_protected_files.py`

### üìñ Documentaci√≥n Clasificada
‚Üí **[Todos los archivos MD en: descarga_datos/ARCHIVOS MD/](descarga_datos/ARCHIVOS%20MD/INDICE_MAESTRO_v47.md)**
- 12 categor√≠as tem√°ticas
- 92 archivos organizados
- B√∫squeda por categor√≠a facilitada

------



## üöÄ Caracter√≠sticas Principales - v4.0### **üìä An√°lisis T√©cnico Avanzado**

- **Heikin-Ashi ML Strategy** probada y optimizada

### **‚úÖ Inteligencia Artificial Optimizada**- **Indicadores TALIB** completos (RSI, MACD, CCI, ATR, Estoc√°stico, Bollinger)

- **RandomForest ML** con 76.8% accuracy en predicciones- **ATR Risk Management** con stops din√°micos y trailing stops

- **Auto-optimizaci√≥n Optuna** con modelos persistentes en `/models`- **Time-based exits** y gesti√≥n de posiciones concurrentes

- **Par√°metros din√°micos** adaptados por s√≠mbolo (BTC, SOL, ETH, etc.)

- **Validaci√≥n cruzada** para robustez del modelo### **üåê Multi-Market Support**

- **Gesti√≥n de overfitting** con control de drawdown <15%- **Binance** (Crypto) v√≠a CCXT con sandbox completo

- **MetaTrader 5** (Forex) nativo con conectores optimizados

### **üìä An√°lisis T√©cnico Avanzado**- **Sandbox Mode** para testing seguro y validaci√≥n

- **Estrategia UltraDetailedHeikinAshiML** con 28 indicadores t√©cnicos- **Live Trading** con gesti√≥n completa de posiciones y compensaci√≥n

- **TALIB Integration** completa (RSI, MACD, CCI, ATR, Estoc√°stico, Bollinger, etc.)

- **ATR Risk Management** con stops din√°micos y trailing stops (65%)### **‚ö° Arquitectura Modular y Segura**

- **Gesti√≥n de posiciones**: 1 posici√≥n concurrente m√°ximo, 2% risk per trade- **Data Flow Optimizado**: SQLite ‚Üí CSV ‚Üí Auto-download con verificaci√≥n

- **Time-based exits** y rebalancing autom√°tico- **Configuraci√≥n Centralizada**: YAML unificado con backups autom√°ticos

- **Sistema Bloqueado**: Archivos cr√≠ticos en solo lectura para protecci√≥n

### **üåê Soportes Multi-Exchange**- **Dashboard Streamlit**: Visualizaci√≥n completa con m√©tricas detalladas

- **Binance Spot** v√≠a CCXT con sandbox completo ‚úÖ- **Estrategia de Desarrollo**: Versi√≥n de pruebas separada para mejoras

- **MetaTrader 5** para Forex (nativo)

- **Modo Sandbox** para testing seguro---

- **Live Trading** con gesti√≥n completa de posiciones

- **Auto-download** de datos faltantes con Yahoo Finance fallback## üìä Resultados Validados - Versi√≥n 3.5



### **‚ö° Arquitectura Modular Robusta**### **M√©tricas de Backtest Optimizado**

- **Data Flow Centralizado**: SQLite primary ‚Üí CSV fallback ‚Üí auto-download- **Total Operaciones**: 1,666 trades

- **Configuraci√≥n YAML**: `descarga_datos/config/config.yaml` unificado- **Tasa de √âxito**: 76.7%

- **Sistema de Logging**: Structured logging en `logs/bot_trader.log`- **Ganancia Neta**: $41,295.77

- **Dashboard Streamlit**: Visualizaci√≥n de m√©tricas y resultados- **Drawdown M√°ximo**: <15% (controlado)

- **Code Protection**: M√©todos cr√≠ticos en solo lectura- **Factor de Profit**: 2.45

- **Ratio Sharpe**: 1.89

### **üîê Correcciones Cr√≠ticas v4.0 Implementadas**

‚úÖ JSON Serialization errors (datetime handling)  ### **Par√°metros Optimizados Aplicados**

‚úÖ Missing method errors (validate_position, calculate_position_risk)  ```yaml

‚úÖ Resource leak errors (shutdown graceful, async handling)  BTC_USDT:

‚úÖ Data type validation (numeric normalization)    atr_period: 17

‚úÖ Live trading stability (24h testing)    cci_threshold: 100

  ema_trend_period: 50

---  kelly_fraction: 0.25

  max_concurrent_trades: 10

## üìä Resultados Validados - Octubre 2025  max_drawdown: 0.11

  ml_threshold: 0.35

### **M√©tricas de Backtest**  stop_loss_atr_multiplier: 2.25

| M√©trica | Valor |  take_profit_atr_multiplier: 3.75

|---------|-------|```

| **Total Operaciones** | 1,679 trades |

| **Tasa de √âxito** | 76.8% ‚úÖ |---

| **Ganancia Neta** | $39,667.40 |

| **Drawdown M√°ximo** | <15% (controlado) |## üÜï **Novedades Versi√≥n 4.0 - Correcciones Cr√≠ticas Aplicadas**

| **Factor de Profit** | 2.33 |

| **Ratio Sharpe** | 1.92 |### **üîß Correcciones en Sistema Live Trading**



### **M√©tricas de Trading Vivo (OCT 21)**#### **1. Error de Serializaci√≥n JSON en Historial de Posiciones**

| M√©trica | Valor |- **Problema**: Objetos `datetime` no serializables causaban errores al guardar historial

|---------|-------|- **Impacto**: P√©rdida de datos de posiciones y errores recurrentes en logs

| **Operaciones Cerradas** | 2 trades |- **Soluci√≥n**: Implementaci√≥n de conversi√≥n autom√°tica `convert_to_json_serializable()` en guardado de historial

| **Tasa de √âxito** | 100% ‚úÖ |- **Resultado**: Historial de posiciones guardado correctamente sin errores

| **Ganancia Realizada** | +0.069870 BTC (~$7,568) |

| **P&L Promedio** | $3,784.18/trade |#### **2. M√©todo `calculate_position_risk` Faltante en AdvancedRiskManager**

| **M√°x Ganancia** | $5,319.75 |- **Problema**: M√©todo cr√≠tico no implementado causaba errores cada 60 segundos

| **M√≠n Ganancia** | $2,248.60 |- **Impacto**: Funcionalidad de monitoreo de riesgo inoperativa

- **Soluci√≥n**: Implementaci√≥n completa del m√©todo con c√°lculo de P&L, riesgo restante y ratio riesgo/recompensa

### **Estado Actual de Capital (OCT 21)**- **Resultado**: Monitoreo de riesgo en tiempo real funcionando correctamente

| Activo | Cantidad | Valor USD |

|--------|----------|-----------|#### **3. Gesti√≥n Mejorada de Conexiones y Shutdown**

| **BTC** | 1.05123 | ~$113,718 |- **Problema**: Conexiones no cerradas correctamente en shutdown

| **USDT** | $1,000.56 | $1,000.56 |- **Impacto**: Recursos no liberados y posibles memory leaks

| **Total** | - | ~$114,718 |- **Soluci√≥n**: Implementaci√≥n de `try/except/finally` blocks y manejo de `asyncio.CancelledError`

- **Resultado**: Shutdown graceful con liberaci√≥n completa de recursos

---

#### **4. Validaci√≥n de Datos Mejorada**

## ‚öôÔ∏è Configuraci√≥n Recomendada - v4.0- **Problema**: Datos inconsistentes en operaciones live

- **Impacto**: Se√±ales err√≥neas y posiciones incorrectas

### **Par√°metros Base (BTC/USDT)**- **Soluci√≥n**: Verificaci√≥n estricta de tipos de datos y normalizaci√≥n de m√©tricas

```yaml- **Resultado**: Integridad de datos garantizada en todas las operaciones

# descarga_datos/config/config.yaml

symbol: "BTC/USDT"### **üìà Mejoras en Rendimiento Live**

timeframe: "15m"

backtest_interval: 5#### **Monitoreo de Posiciones 24/7**

risk_per_trade: 2.0  # %- **Trailing Stops Din√°micos**: Stop loss ajustado autom√°ticamente basado en ATR

max_concurrent_trades: 1- **C√°lculo de Riesgo en Tiempo Real**: P&L actual, riesgo restante, ratio riesgo/recompensa

- **Gesti√≥n de Posiciones Concurrentes**: Hasta 10 posiciones simult√°neas por s√≠mbolo

# Risk Management- **Compensaci√≥n Autom√°tica**: Balanceo de posiciones BUY/SELL para neutralidad

atr_period: 17

stop_loss_multiplier: 2.25#### **Dashboard Mejorado**

take_profit_multiplier: 3.75- **M√©tricas Live**: Win rate, P&L total, drawdown en tiempo real

trailing_stop_percent: 65- **Historial de Operaciones**: Todas las posiciones abiertas/cerradas con detalles

- **Alertas de Riesgo**: Notificaciones autom√°ticas cuando se alcanzan l√≠mites

# ML & Optimization- **Visualizaci√≥n de Se√±ales ML**: Confianza y predicciones en tiempo real

strategy: "UltraDetailedHeikinAshiML"

model_type: "RandomForest"### **üõ°Ô∏è Sistema de Seguridad Reforzado**

optimize_enabled: true

```#### **Validaciones de Integridad**

- **Checksum de Datos**: Verificaci√≥n de integridad en descargas

### **Modos de Operaci√≥n**- **Backup Autom√°tico**: Configuraciones y modelos guardados autom√°ticamente

```bash- **Recovery Points**: Puntos de restauraci√≥n para recuperaci√≥n de fallos

# Backtesting- **Sandbox Obligatorio**: Testing en modo seguro antes de producci√≥n

python descarga_datos/main.py --backtest

---

# Optimizaci√≥n (Optuna)

python descarga_datos/main.py --optimize## üìã Requisitos del Sistema



# Trading Vivo (Sandbox por defecto)### **Dependencias**

python descarga_datos/main.py --live```bash

pip install -r requirements.txt

# Verificaci√≥n de datos```

python descarga_datos/main.py --verify-data

```### **Python Version**

- **Python 3.13.7** recomendado (probado)

---- **Virtual Environment** obligatorio (.venv)



## üîß Instalaci√≥n y Setup - QUICK START### **Credenciales**

```bash

### **Requisitos Previos**# Binance Testnet (Sandbox)

- Python 3.13+ ‚úÖexport BINANCE_TEST_API_KEY="tu_api_key"

- pip/condaexport BINANCE_TEST_API_SECRET="tu_api_secret"

- Git

# MetaTrader 5

### **1. Clonar y Setup del Entorno**# Configurar en MT5 Manager

```bash```

git clone https://github.com/javiertarazon/ultra_detailed_heikin_ashi_ml_strategy.git

cd botcopilot-sar---



# Crear entorno virtual## üèÉ‚Äç‚ôÇÔ∏è Inicio R√°pido

python -m venv .venv

.venv\Scripts\activate  # Windows### **1. Configuraci√≥n Inicial**

```bash

# Instalar dependencias# Clonar y configurar entorno

pip install -r requirements.txtgit clone <repository>

```cd botcopilot-sar

python -m venv .venv

### **2. Configurar Credenciales Binance (Testnet)**.venv\Scripts\activate  # Windows

```bashpip install -r requirements.txt

# Crear archivo .env en descarga_datos/```

# Agregar credenciales:

BINANCE_TEST_API_KEY=your_key### **2. Validaci√≥n del Sistema**

BINANCE_TEST_API_SECRET=your_secret```bash

```# Ejecutar smoke test

python -m pytest descarga_datos/tests/test_quick_backtest.py

### **3. Verificar Instalaci√≥n**```

```bash

python -m pytest descarga_datos/tests/test_quick_backtest.py### **3. Configuraci√≥n B√°sica**

```Edita `descarga_datos/config/config.yaml`:

```yaml

### **4. Ejecutar Backtest (Validaci√≥n)**trading:

```bash  symbols: ["BTC/USDT", "ETH/USDT"]

python descarga_datos/main.py --backtest  timeframe: "15m"

```  sandbox: true  # Cambiar a false para live trading



### **5. Ejecutar Live Trading**ml:

```bash  enabled: true

python descarga_datos/main.py --live  model_type: "random_forest"

``````



---### **4. Entrenar Modelos ML**

```bash

## üìÅ Estructura de Carpetaspython descarga_datos/main.py --optimize

```

```

botcopilot-sar/### **5. Ejecutar Live Trading**

‚îú‚îÄ‚îÄ descarga_datos/```bash

‚îÇ   ‚îú‚îÄ‚îÄ main.py                          # Entry point principal# Modo sandbox (recomendado primero)

‚îÇ   ‚îú‚îÄ‚îÄ config/python descarga_datos/main.py --live

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.yaml                  # üîë CONFIGURACI√ìN CENTRALIZADA

‚îÇ   ‚îú‚îÄ‚îÄ core/                            # Core modules# Modo producci√≥n (con precauci√≥n)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ccxt_live_data.py           # Live data CCXT# Cambiar sandbox: false en config.yaml

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ downloader.py               # Data downloader```

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exchange_utils.py           # Utilidades exchange

‚îÇ   ‚îú‚îÄ‚îÄ strategies/---

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_strategy.py            # Base class

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ultra_detailed_heikin_ashi_ml_strategy.py## üìÅ Estructura del Proyecto

‚îÇ   ‚îú‚îÄ‚îÄ backtesting/

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backtesting_orchestrator.py```

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ backtest_runner.pybotcopilot-sar/

‚îÇ   ‚îú‚îÄ‚îÄ indicators/‚îú‚îÄ‚îÄ descarga_datos/           # üè† Core del sistema

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ technical_indicators.py‚îÇ   ‚îú‚îÄ‚îÄ main.py              # üöÄ Punto de entrada principal

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ talib_wrapper.py            # TALIB wrapper‚îÇ   ‚îú‚îÄ‚îÄ config/              # ‚öôÔ∏è Configuraciones YAML

‚îÇ   ‚îú‚îÄ‚îÄ models/                          # ML Models (Optuna)‚îÇ   ‚îú‚îÄ‚îÄ core/                # üîß Componentes core (CCXT, MT5)

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BTC_USDT_model.pkl‚îÇ   ‚îú‚îÄ‚îÄ strategies/          # üéØ Estrategias de trading

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...‚îÇ   ‚îú‚îÄ‚îÄ indicators/          # üìä Indicadores t√©cnicos

‚îÇ   ‚îú‚îÄ‚îÄ utils/‚îÇ   ‚îú‚îÄ‚îÄ models/              # ü§ñ Modelos ML entrenados

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py                   # Sistema de logging‚îÇ   ‚îú‚îÄ‚îÄ backtesting/         # üìà Backtesting engine

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger_metrics.py           # M√©tricas‚îÇ   ‚îú‚îÄ‚îÄ optimizacion/        # üî¨ Optimizaci√≥n Optuna

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.py                  # SQLite/CSV storage‚îÇ   ‚îú‚îÄ‚îÄ risk_management/     # üõ°Ô∏è Gesti√≥n de riesgos

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config_loader.py            # Config loader‚îÇ   ‚îú‚îÄ‚îÄ utils/               # üõ†Ô∏è Utilidades (logging, storage)

‚îÇ   ‚îú‚îÄ‚îÄ ARCHIVOS MD/                     # üìö DOCUMENTACI√ìN COMPLETA‚îÇ   ‚îú‚îÄ‚îÄ tests/               # üß™ Suite de testing

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 00_INDICE_MAESTRO_v4.md     # COMENZAR AQU√ç‚îÇ   ‚îî‚îÄ‚îÄ ARCHIVOS MD/         # üìö Documentaci√≥n completa

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md‚îú‚îÄ‚îÄ data/                    # üíæ Datos hist√≥ricos

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CHANGELOG.md‚îú‚îÄ‚îÄ logs/                    # üìù Logs del sistema

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 01_SISTEMA_MODULAR_COMPLETO.md‚îú‚îÄ‚îÄ models/                  # üß† Modelos ML guardados

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 02_OPTIMIZACION_ML_COMPLETO.md‚îî‚îÄ‚îÄ requirements.txt         # üì¶ Dependencias Python

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LIVE_TRADING_SANDBOX_GUIDE.md```

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 05_CORRECCIONES_Y_MEJORAS.md

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (45+ documentos)---

‚îÇ   ‚îú‚îÄ‚îÄ tests/

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_quick_backtest.py
‚îÇ   ‚îî‚îÄ‚îÄ .env                            # üîê Credenciales (no compartir)

---

## üöÄ **Ejecuci√≥n Segura del Sistema**

### **Scripts de Lanzamiento Autom√°ticos**

Para garantizar que el sistema se ejecute √∫nicamente en el entorno correcto (Python 3.11.x + entorno virtual), utiliza los scripts de lanzamiento incluidos:

#### **Windows (.bat)**
```cmd
# Desde la ra√≠z del proyecto
run_bot.bat --backtest
run_bot.bat --optimize
run_bot.bat --live
```

#### **Linux/Mac (.sh)**
```bash
# Desde la ra√≠z del proyecto
chmod +x descarga_datos/run_bot.sh
./descarga_datos/run_bot.sh --backtest
./descarga_datos/run_bot.sh --optimize
./descarga_datos/run_bot.sh --live
```

### **Verificaciones Autom√°ticas**
Los scripts de lanzamiento verifican autom√°ticamente:
- ‚úÖ **Entorno virtual activado** (.venv)
- ‚úÖ **Versi√≥n Python 3.11.x** exacta
- ‚úÖ **Archivo de configuraci√≥n** presente
- ‚úÖ **Dependencias instaladas**

### **Ejecuci√≥n Manual (Solo para desarrollo)**
Si necesitas ejecutar manualmente (no recomendado para producci√≥n):
```bash
# Activar entorno virtual primero
.venv\Scripts\activate  # Windows
source .venv/bin/activate  # Linux/Mac

# Luego ejecutar
python descarga_datos/main.py --backtest
```

## üéØ Modos de Operaci√≥n

‚îÇ   ‚îî‚îÄ‚îÄ .env                            # üîê Credenciales (no compartir)

‚îÇ### **Backtesting** üìà

‚îú‚îÄ‚îÄ data/```bash

‚îÇ   ‚îú‚îÄ‚îÄ sqlite/                         # SQLite databasespython descarga_datos/main.py --backtest

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.db```

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metadata.db- Prueba estrategias con datos hist√≥ricos

‚îÇ   ‚îú‚îÄ‚îÄ csv/                            # CSV backup- Genera m√©tricas de rendimiento

‚îÇ   ‚îú‚îÄ‚îÄ live_data/                      # Live trading data- Valida l√≥gica antes de live trading

‚îÇ   ‚îî‚îÄ‚îÄ dashboard_results/              # Resultados optimizaci√≥n

‚îÇ### **Optimizaci√≥n ML** üî¨

‚îú‚îÄ‚îÄ logs/```bash

‚îÇ   ‚îî‚îÄ‚îÄ bot_trader.log                  # üìã Principal logpython descarga_datos/main.py --optimize

‚îÇ```

‚îú‚îÄ‚îÄ requirements.txt                     # Dependencias- Auto-optimizaci√≥n con Optuna

‚îú‚îÄ‚îÄ README.md                            # Este archivo- Entrenamiento de modelos RandomForest

‚îî‚îÄ‚îÄ .gitignore- B√∫squeda de par√°metros √≥ptimos



```### **Live Trading** üöÄ

```bash

---python descarga_datos/main.py --live

```

## üîç Troubleshooting - Problemas Comunes- Trading automatizado 24/7

- Gesti√≥n completa de posiciones

### **‚ùå "Error: No se encuentran datos"**- Dashboard de monitoreo en tiempo real

**Soluci√≥n:** El sistema auto-descargar√°. Ejecuta primero:

```bash---

python descarga_datos/main.py --backtest

```## üìä Dashboard y Monitoreo



### **‚ùå "JSON serialization error"**### **Visualizaci√≥n en Tiempo Real**

**Soluci√≥n:** Verificado y fijado en v4.0. Consulta: `descarga_datos/ARCHIVOS MD/05_CORRECCIONES_Y_MEJORAS.md````bash

# Se lanza autom√°ticamente con --live

### **‚ùå "Exit code 1 en live trading"**# Acceder en: http://localhost:8519-8523

**Soluci√≥n:** ```

1. Verifica credenciales `.env`

2. Consulta logs: `tail -f logs/bot_trader.log`### **M√©tricas Disponibles**

3. Lee: `LIVE_TRADING_SANDBOX_GUIDE.md`- **Se√±ales ML**: Confianza y predicciones

- **Posiciones**: P&L, drawdown, win rate

### **‚ùå "Memory leak o recursos no liberados"**- **Riesgos**: ATR stops, trailing stops

**Soluci√≥n:** Sistema corregido en v4.0. Implementado graceful shutdown. Ver: `CORRECCIONES_V4.0.md`- **Performance**: M√©tricas hist√≥ricas



### **M√°s problemas:**---

Consulta: **`descarga_datos/ARCHIVOS MD/05_CORRECCIONES_Y_MEJORAS.md`** (gu√≠a completa)

## üîß Configuraci√≥n Avanzada

---

### **Par√°metros ML**

## üìà C√≥mo Usar - Flujos T√≠picos```yaml

ml:

### **Opci√≥n 1: Solo Backtesting (Validaci√≥n)**  enabled: true

```bash  model_type: "random_forest"

# 1. Ejecutar backtest  confidence_threshold: 0.7

python descarga_datos/main.py --backtest  features: ["rsi", "macd", "cci", "stoch_k", "atr", "ha_close"]

```

# 2. Ver resultados en dashboard

python run_dashboard.py### **Gesti√≥n de Riesgos**

# Abre: http://localhost:8519```yaml

```risk_management:

  atr_period: 14

### **Opci√≥n 2: Optimizar Par√°metros (Optuna)**  stop_loss_atr: 3.25

```bash  take_profit_atr: 5.5

# 1. Ejecutar optimizaci√≥n (puede tomar 30-60 min)  trailing_stop_pct: 0.5

python descarga_datos/main.py --optimize  max_drawdown_pct: 5.0

```

# 2. Ver modelos optimizados en: descarga_datos/models/

### **Exchanges**

# 3. Ver resultados en dashboard```yaml

python run_dashboard.pyexchanges:

```  binance:

    sandbox: true

### **Opci√≥n 3: Trading Vivo (Sandbox)**    api_key: "${BINANCE_TEST_API_KEY}"

```bash    api_secret: "${BINANCE_TEST_API_SECRET}"

# 1. Verificar configuraci√≥n en config.yaml```

cat descarga_datos/config/config.yaml

---

# 2. Ejecutar live trading

python descarga_datos/main.py --live## üìö Documentaci√≥n Completa



# 3. Monitorear en tiempo real### **Documentos Principales**

tail -f logs/bot_trader.log- **[Sistema Modular](descarga_datos/ARCHIVOS%20MD/01_SISTEMA_MODULAR_COMPLETO.md)** - Arquitectura y desarrollo

- **[Optimizaci√≥n ML](descarga_datos/ARCHIVOS%20MD/02_OPTIMIZACION_ML_COMPLETO.md)** - Machine Learning y Optuna

# 4. Ver dashboard (otro terminal)- **[Testing](descarga_datos/ARCHIVOS%20MD/03_TESTING_Y_VALIDACION.md)** - Validaci√≥n y pruebas

python run_dashboard.py- **[Historial](descarga_datos/ARCHIVOS%20MD/04_HISTORIAL_VERSIONES.md)** - Versiones y evoluci√≥n

```- **[Correcciones](descarga_datos/ARCHIVOS%20MD/05_CORRECCIONES_Y_MEJORAS.md)** - Problemas resueltos



---### **üìã Correcciones Recientes**

- **[Correcciones Live Trading](descarga_datos/ARCHIVOS%20MD/CORRECCIONES_SISTEMA_LIVE_TRADING.md)** - ‚úÖ **NUEVO** - Todas las correcciones v3.0

## üß™ Testing y Validaci√≥n

---

### **Smoke Test (R√°pido - 2 min)**

```bash## üõ†Ô∏è Troubleshooting

python -m pytest descarga_datos/tests/test_quick_backtest.py -v

```### **Problemas Comunes**



### **Test Completo (Lento - 10+ min)**#### **Error de Sintaxis**

```bash```bash

python -m pytest descarga_datos/tests/ -v --tb=shortpython -m py_compile descarga_datos/strategies/ultra_detailed_heikin_ashi_ml_strategy.py

``````



---#### **Modelo ML no encontrado**

```bash

## üéØ Key Metrics - Validaci√≥n v4.0python descarga_datos/main.py --optimize

```

### **Sistema Estable**

- ‚úÖ Backtest sin errores: 1,679 trades ejecutados#### **Conexi√≥n Exchange fallida**

- ‚úÖ Win rate 76.8%- Verificar credenciales en variables de entorno

- ‚úÖ JSON serialization: FIJADO- Confirmar sandbox mode en config.yaml

- ‚úÖ Resource cleanup: IMPLEMENTADO

- ‚úÖ Graceful shutdown: ACTIVO#### **Datos insuficientes**

- ‚úÖ 24h live testing: COMPLETADO- Ejecutar descarga autom√°tica con `--backtest`

- Verificar configuraci√≥n de s√≠mbolos y timeframes

### **Indicadores T√©cnicos (28 total)**

‚úÖ RSI, MACD, CCI, ATR, Estoc√°stico, Bollinger, Ichimoku  ### **Logs y Debugging**

‚úÖ Moving Averages, KAMA, ADX, OBV, MFI, ROC  ```bash

‚úÖ Williams %R, Aroon, Keltner, VWAP, TRIX  # Logs principales

‚úÖ y 11 m√°s...tail -f logs/trading_system.log



---# Logs ML

tail -f logs/ml_system.log

## üìû Soporte y Contribuci√≥n

# Dashboard logs

### **Reportar Bugs**tail -f logs/dashboard.log

1. Revisa: `descarga_datos/ARCHIVOS MD/05_CORRECCIONES_Y_MEJORAS.md````

2. Consulta logs: `logs/bot_trader.log`

3. Crea issue en GitHub con logs---



### **Proponer Mejoras**## üö® Consideraciones de Seguridad

Sigue la gu√≠a en: `descarga_datos/ARCHIVOS MD/CONTRIBUTING.md`

### **Modo Sandbox Obligatorio**

### **Documentaci√≥n**- **Siempre probar primero** con `sandbox: true`

√çndice completo: `descarga_datos/ARCHIVOS MD/00_INDICE_MAESTRO_v4.md`- **Capital virtual** en testnet

- **Validar l√≥gica** antes de producci√≥n

---

### **Gesti√≥n de Riesgos**

## üìú Licencia- **ATR stops** din√°micos implementados

- **Max drawdown** configurado

Ver: `descarga_datos/ARCHIVOS MD/LICENSE.md`- **Trailing stops** para proteger ganancias



---### **Backup Autom√°tico**

- **Modelos ML** guardados en `models/`

## üèÅ Estado Actual - 21 Octubre 2025- **Configuraciones** versionadas

- **Datos hist√≥ricos** en SQLite + CSV

### **Sistema Status**

| Componente | Estado | Detalles |---

|-----------|--------|----------|

| **Backtesting** | ‚úÖ ACTIVO | 1,679 trades, 76.8% win rate |## üìà Rendimiento y M√©tricas

| **Optimizaci√≥n** | ‚úÖ ACTIVO | Modelos en `/models`, Optuna funcional |

| **Live Trading** | ‚úÖ ACTIVO | 2 operaciones exitosas, 100% win rate |### **Benchmarks Recientes**

| **Dashboard** | ‚úÖ ACTIVO | Streamlit en puerto 8519 |- **Win Rate**: 60-75% (depende del s√≠mbolo)

| **Data Storage** | ‚úÖ ACTIVO | SQLite + CSV backup |- **Max Drawdown**: < 5% configurado

| **Logging** | ‚úÖ ACTIVO | Structured logging completo |- **Sharpe Ratio**: > 1.5 en optimizaci√≥n

- **Latencia**: < 500ms por se√±al

### **Capital & P&L**

- **BTC**: 1.05123 (~$113,718)### **S√≠mbolos Soportados**

- **USDT**: $1,000.56 (reserva)- **Crypto**: BTC/USDT, ETH/USDT, SOL/USDT, ADA/USDT

- **Ganancias Realizadas**: +0.069870 BTC (~$7,568)- **Forex**: EUR/USD, GBP/USD, USD/JPY (MT5)



### **Pr√≥ximos Pasos**---

1. Ejecutar live trading con capital actual

2. Monitorear 24h operaciones## ü§ù Contribuci√≥n y Desarrollo

3. Analizar resultados vs backtest

4. Optimizar par√°metros si es necesario### **Reglas de Desarrollo**

5. Escalar gradualmente- **Archivos Protegidos**: Estrategia ML y main.py (solo mejoras param√©tricas)

- **Testing Obligatorio**: Ejecutar suite completa antes de commits

---- **Documentaci√≥n**: Actualizar docs con cambios significativos



**√öltima actualizaci√≥n**: 21 de octubre de 2025 - 21:45 UTC  ### **Extensi√≥n del Sistema**

**Versi√≥n**: 4.0.1  ```python

**Mantenedor**: Bot Trader Copilot Team  # Nueva estrategia: extender base_strategy.py

**Repositorio**: https://github.com/javiertarazon/ultra_detailed_heikin_ashi_ml_strategy# Nuevo indicador: agregar a technical_indicators.py

# Nuevo exchange: implementar en core/

---```



## üìö Links Importantes---



| Link | Descripci√≥n |## üìû Soporte

|------|-------------|

| **[√çndice Maestro](descarga_datos/ARCHIVOS%20MD/00_INDICE_MAESTRO_v4.md)** | Navegaci√≥n completa de docs |- **üìß Issues**: GitHub Issues para bugs y features

| **[Gu√≠a Live Trading](descarga_datos/ARCHIVOS%20MD/LIVE_TRADING_SANDBOX_GUIDE.md)** | Step-by-step para live |- **üìö Docs**: Documentaci√≥n completa en `ARCHIVOS MD/`

| **[Correcciones v4.0](descarga_datos/ARCHIVOS%20MD/05_CORRECCIONES_Y_MEJORAS.md)** | Todos los fixes aplicados |- **üîß Logs**: Debugging detallado en `logs/`

| **[Optimizaci√≥n](descarga_datos/ARCHIVOS%20MD/02_OPTIMIZACION_ML_COMPLETO.md)** | C√≥mo optimizar con Optuna |- **üìä Dashboard**: Monitoreo visual en tiempo real

| **[Changelog](descarga_datos/ARCHIVOS%20MD/CHANGELOG.md)** | Historial de cambios |

---

---

## üìã Checklist Pre-Live Trading

¬°Gracias por usar Bot Trader Copilot! üöÄ

- [ ] **Configuraci√≥n**: `config.yaml` actualizado
- [ ] **Credenciales**: Variables de entorno configuradas
- [ ] **Modelos ML**: Entrenados y validados
- [ ] **Sandbox Test**: Verificado funcionamiento
- [ ] **Risk Management**: Par√°metros ATR configurados
- [ ] **Backup**: Configuraci√≥n guardada
- [ ] **Monitoreo**: Dashboard operativo

---

**‚ö†Ô∏è Disclaimer**: Este sistema es para fines educativos e investigaci√≥n. El trading conlleva riesgos financieros significativos. Siempre prueba en sandbox antes de usar capital real.

---
*Bot Trader Copilot v4.0 - Sistema de Trading Automatizado con ML Estabilizado* ü§ñüìà